appId: com.tuvotodecide
---
# Test: Flujo completo de atestiguamiento de actas existentes
- launchApp:
    clearState: false
- tapOn: "Open debugger to view warnings."
- assertNotVisible: "Open debugger to view warnings."

# === FASE 1: ACCESO AL SISTEMA ===
- tapOn: "Tengo una cuenta"
- inputText: "1234"
- assertVisible: "Bienvenido"

# === FASE 2: ACCEDER A ATESTIGUAMIENTO ===
- tapOn: ", Participar, Sube actas electorales o participa como testigo en el proceso de verificación ciudadana"
- assertVisible: "Participación Electoral"
- tapOn: "Atestiguar actas"

# === FASE 3: VERIFICAR LISTA DE ACTAS ===
- extendedWaitUntil:
    visible: "Actas para atestiguar"
    timeout: 15000

# Verificar carga de datos
- assertVisible:
    text: "Cargando actas"
    optional: true
- extendedWaitUntil:
    visible: "Mesa"
    timeout: 20000

# === FASE 4: EXPLORAR ACTAS DISPONIBLES ===
# Verificar diferentes mesas disponibles
- assertVisible:
    text: "Mesa 120"
    optional: true
- assertVisible:
    text: "Mesa 150"
    optional: true

# Scroll para ver más actas
- swipe:
    start: "50%, 80%"
    end: "50%, 20%"
    duration: 300

# === FASE 5: SELECCIONAR ACTA PARA ATESTIGUAR ===
- tapOn: "Mesa 120"
- extendedWaitUntil:
    visible: "¿Cuál es correcta?"
    timeout: 15000

# === FASE 6: REVISAR ACTAS MÚLTIPLES ===
# Verificar que se muestran las opciones
- assertVisible:
    text: "Revisar actas"
    optional: true
- assertVisible:
    text: "Selecciona la correcta"
    optional: true

# Scroll horizontal para ver diferentes actas
- swipe:
    start: "80%, 50%"
    end: "20%, 50%"
    duration: 300

- swipe:
    start: "20%, 50%"
    end: "80%, 50%"
    duration: 300

# === FASE 7: ESCENARIO 1 - CONFIRMAR ACTA CORRECTA ===
- tapOn: "Esta es correcta"
- assertVisible: "Confirmación"
- assertVisible:
    text: "¿Confirmas que esta acta es correcta?"
    optional: true

# Confirmar atestiguamiento
- tapOn: "Confirmar atestiguamiento"
- extendedWaitUntil:
    visible: "Atestiguamiento registrado"
    timeout: 15000

# Verificar mensaje de éxito
- assertVisible:
    text: "Tu atestiguamiento ha sido registrado"
    optional: true
- assertVisible:
    text: "Gracias por tu participación"
    optional: true

# === FASE 8: REGRESAR Y PROBAR OTRO ESCENARIO ===
- tapOn: "Continuar"
- tapOn: "Regresar"
- assertVisible: "Actas para atestiguar"

# === FASE 9: ESCENARIO 2 - NINGUNA ES CORRECTA ===
- tapOn: "Mesa 150"
- extendedWaitUntil:
    visible: "¿Cuál es correcta?"
    timeout: 15000
    optional: true

# Si no hay actas, verificar mensaje
- assertVisible:
    text: "No hay actas para esta mesa"
    optional: true

# Si hay actas, seleccionar "Ninguna es correcta"
- tapOn: "Ninguna es correcta"
- assertVisible:
    text: "Subir acta correcta"
    optional: true

# === FASE 10: SUBIR ACTA CORRECTA ===
- tapOn: "Subir foto de acta correcta"
- extendedWaitUntil:
    visible: "Cámara"
    timeout: 8000
    optional: true

# Tomar foto del acta correcta
- tapOn: "Tomar foto"
- extendedWaitUntil:
    visible: "Revisar foto"
    timeout: 10000
    optional: true

- tapOn: "Continuar"
- extendedWaitUntil:
    visible: "Datos de la nueva acta"
    timeout: 15000
    optional: true

# === FASE 11: VALIDAR NUEVA ACTA ===
- assertVisible:
    text: "Confirma los datos"
    optional: true
- assertVisible:
    text: "Mesa"
    optional: true

# Editar datos si es necesario
- tapOn:
    text: "Editar"
    optional: true

# === FASE 12: COMPLETAR PROCESO ===
- tapOn:
    text: "Confirmar y enviar"
    optional: true

- extendedWaitUntil:
    visible: "Acta enviada exitosamente"
    timeout: 20000
    optional: true

# === FASE 13: VERIFICAR HISTORIAL ===
- tapOn: "Ver mis atestiguamientos"
- assertVisible:
    text: "Mis Atestiguamientos"
    optional: true

# Verificar que aparecen los atestiguamientos realizados
- assertVisible:
    text: "Mesa 120"
    optional: true

# === FASE 14: DETALLES DE ATESTIGUAMIENTO ===
- tapOn: "Mesa 120"
- assertVisible:
    text: "Detalle del Atestiguamiento"
    optional: true
- assertVisible:
    text: "Resultados atestiguados"
    optional: true

# Verificar datos del atestiguamiento
- assertVisible:
    text: "Votos registrados"
    optional: true
- assertVisible:
    text: "Fecha"
    optional: true

# === FASE 15: NAVEGACIÓN DE REGRESO ===
- tapOn: "Regresar"
- tapOn: "Regresar"
- assertVisible: "Participación Electoral"
