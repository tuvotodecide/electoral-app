appId: com.tuvotodecide
---
# Test: Validación de datos y casos límite en formularios de actas
- launchApp:
    clearState: false
- tapOn: "Open debugger to view warnings."
- assertNotVisible: "Open debugger to view warnings."

# === FASE 1: SETUP Y NAVEGACIÓN ===
- tapOn: "Tengo una cuenta"
- inputText: "1234"
- assertVisible: "Bienvenido"
- tapOn: ", Participar, Sube actas electorales o participa como testigo en el proceso de verificación ciudadana"
- tapOn: "Subir actas electorales"
- tapOn: "Mesa 120"
- tapOn: "Tomar Foto"
- tapOn: "Tomar Foto"

# === FASE 2: ESPERAR ANÁLISIS Y ACCEDER A EDICIÓN ===
- tapOn:
    text: ", Analizar"
    optional: false
    repeat: 1
    delay: 10000
- extendedWaitUntil:
    visible: "Acta"
    timeout: 25000
- tapOn:
    id: "editButton"

# === FASE 3: VALIDACIONES DE ENTRADA - VOTOS NEGATIVOS ===
- scrollUntilVisible:
    element:
      id: partyInputPresidente0
    direction: up

# Intentar ingresar números negativos
- doubleTapOn:
    id: partyInputPresidente0
- eraseText
- inputText: "-5"
- extendedWaitUntil:
    visible: "Los votos no pueden ser negativos"
    timeout: 3000
    optional: true

# === FASE 4: VALIDACIONES - NÚMEROS EXCESIVAMENTE GRANDES ===
- doubleTapOn:
    id: partyInputPresidente0
- eraseText
- inputText: "999999"
- extendedWaitUntil:
    visible: "Número de votos muy alto"
    timeout: 3000
    optional: true

# === FASE 5: VALIDACIONES - CARACTERES NO NUMÉRICOS ===
- doubleTapOn:
    id: partyInputPresidente0
- eraseText
- inputText: "abc"
- extendedWaitUntil:
    visible: "Solo se permiten números"
    timeout: 3000
    optional: true

# === FASE 6: VALIDACIONES - CARACTERES ESPECIALES ===
- doubleTapOn:
    id: partyInputPresidente0
- eraseText
- inputText: "12@#"
- extendedWaitUntil:
    visible: "Solo se permiten números"
    timeout: 3000
    optional: true

# === FASE 7: VALIDACIONES - CAMPOS VACÍOS ===
- doubleTapOn:
    id: partyInputPresidente0
- eraseText
- inputText: ""
- extendedWaitUntil:
    visible: "Campo requerido"
    timeout: 3000
    optional: true

# === FASE 8: INGRESAR DATOS VÁLIDOS ===
- doubleTapOn:
    id: partyInputPresidente0
- eraseText
- inputText: "45"

- doubleTapOn:
    id: partyInputDiputado0
- eraseText
- inputText: "42"

# === FASE 9: VALIDAR CONSISTENCIA DE DATOS ===
# Ingresar datos en múltiples partidos
- doubleTapOn:
    id: partyInputPresidente1
- eraseText
- inputText: "95"

- doubleTapOn:
    id: partyInputDiputado1
- eraseText
- inputText: "65"

# === FASE 10: VALIDACIONES EN RESUMEN DE VOTOS ===
- scrollUntilVisible:
    element:
      id: voteSummary_validos_presidente
    direction: down

# Intentar totales inconsistentes
- doubleTapOn:
    id: voteSummary_validos_presidente
- eraseText
- inputText: "50"  # Menor que la suma de votos individuales

- extendedWaitUntil:
    visible: "El total no coincide con la suma"
    timeout: 5000
    optional: true

# === FASE 11: CORREGIR TOTALES ===
- doubleTapOn:
    id: voteSummary_validos_presidente
- eraseText
- inputText: "140"  # Suma correcta: 45 + 95

- doubleTapOn:
    id: voteSummary_validos_diputado
- eraseText
- inputText: "107"  # Suma correcta: 42 + 65

# === FASE 12: VALIDAR VOTOS BLANCOS Y NULOS ===
- doubleTapOn:
    id: voteSummary_blancos_presidente
- eraseText
- inputText: "-1"  # Valor negativo
- extendedWaitUntil:
    visible: "Los votos no pueden ser negativos"
    timeout: 3000
    optional: true

- doubleTapOn:
    id: voteSummary_blancos_presidente
- eraseText
- inputText: "2"

- doubleTapOn:
    id: voteSummary_nulos_presidente
- eraseText
- inputText: "abc"  # Texto inválido
- extendedWaitUntil:
    visible: "Solo se permiten números"
    timeout: 3000
    optional: true

- doubleTapOn:
    id: voteSummary_nulos_presidente
- eraseText
- inputText: "3"

# === FASE 13: VALIDACIONES DE LÍMITES MÁXIMOS ===
# Verificar que no se excedan límites razonables
- doubleTapOn:
    id: partyInputPresidente2
- eraseText
- inputText: "10000"  # Número muy alto para una mesa
- extendedWaitUntil:
    visible: "Número excesivo para una mesa electoral"
    timeout: 3000
    optional: true

# === FASE 14: VALIDAR COHERENCIA ENTRE PRESIDENTE Y DIPUTADO ===
- doubleTapOn:
    id: partyInputPresidente2
- eraseText
- inputText: "100"

- doubleTapOn:
    id: partyInputDiputado2
- eraseText
- inputText: "5"  # Diferencia muy grande

- extendedWaitUntil:
    visible: "Diferencia significativa entre votos"
    timeout: 5000
    optional: true

# === FASE 15: CORREGIR Y VALIDAR DATOS FINALES ===
- doubleTapOn:
    id: partyInputPresidente2
- eraseText
- inputText: "10"

- doubleTapOn:
    id: partyInputDiputado2
- eraseText
- inputText: "8"

# Actualizar totales
- doubleTapOn:
    id: voteSummary_validos_presidente
- eraseText
- inputText: "150"  # 45 + 95 + 10

- doubleTapOn:
    id: voteSummary_validos_diputado
- eraseText
- inputText: "115"  # 42 + 65 + 8

# === FASE 16: INTENTAR GUARDAR CON DATOS VÁLIDOS ===
- tapOn:
    id: "saveButton"

# Verificar mensaje de éxito
- extendedWaitUntil:
    visible: "Datos validados correctamente"
    timeout: 8000
    optional: true
- extendedWaitUntil:
    visible: "Datos guardados"
    timeout: 8000
    optional: true

# === FASE 17: CONTINUAR PROCESO ===
- tapOn:
    id: button1
    optional: true

- tapOn:
    id: "nextButton"
    optional: true

# === FASE 18: VALIDACIÓN FINAL ANTES DE PUBLICAR ===
- assertVisible:
    text: "Revisa los datos antes de publicar"
    optional: true

# Verificar resumen de datos
- assertVisible:
    text: "Total votos válidos"
    optional: true
- assertVisible:
    text: "150"
    optional: true

# === FASE 19: CONFIRMAR PUBLICACIÓN ===
- tapOn: "Publico y Certifico"
- extendedWaitUntil:
    visible: "Certificado NFT"
    timeout: 35000
    optional: true

# Verificar proceso exitoso
- assertVisible:
    text: "Certificado NFT - Elecciones Bolivia 2025"
    optional: true
