appId: com.tuvotodecide
---
# Test: Flujo completo de subida de acta con toma de foto y validaciones
- launchApp:
    clearState: false
- tapOn: "Open debugger to view warnings."
- assertNotVisible: "Open debugger to view warnings."

# === FASE 1: ACCESO Y NAVEGACIÓN ===
- tapOn: "Tengo una cuenta"
- inputText: "1234"
- assertVisible: "Bienvenido"
- tapOn: ", Participar, Sube actas electorales o participa como testigo en el proceso de verificación ciudadana"
- tapOn: "Subir actas electorales"

# === FASE 2: BÚSQUEDA DE MESA ===
- tapOn: "Mesa 120"
- extendedWaitUntil:
    visible: "Mesa 120"
    timeout: 10000

# === FASE 3: VERIFICAR INFORMACIÓN DE MESA ===
- assertVisible: "Mesa 120"
- assertVisible: "DIRECC9"
- assertVisible:
    text: "Código de Mesa"
    optional: true

# === FASE 4: INICIAR TOMA DE FOTO ===
- tapOn: "Tomar Foto"
- extendedWaitUntil:
    visible: "Cámara"
    timeout: 8000
    optional: true

# Verificar permisos de cámara
- assertVisible:
    text: "Permitir acceso a la cámara"
    optional: true
- tapOn:
    text: "Permitir"
    optional: true

# === FASE 5: INTERFAZ DE CÁMARA ===
- assertVisible:
    text: "Tomar Foto"
    optional: true
- assertVisible:
    text: "Asegúrate de que el acta esté bien iluminada"
    optional: true

# Simular toma de foto
- tapOn: "Tomar Foto"
- extendedWaitUntil:
    visible: "Revisar foto"
    timeout: 10000
    optional: true
- extendedWaitUntil:
    visible: "Análisis"
    timeout: 10000
    optional: true

# === FASE 6: ANÁLISIS CON IA ===
- tapOn:
    text: ", Analizar"
    optional: false
    repeat: 1
    delay: 10000

# Esperar análisis de IA
- extendedWaitUntil:
    visible: "Acta"
    timeout: 25000

# Verificar resultados del análisis
- assertVisible:
    text: "Acta"
    optional: true
- assertVisible:
    text: "Mesa"
    optional: true

# === FASE 7: REVISAR DATOS DETECTADOS ===
- swipe:
    start: "50%, 80%"
    end: "50%, 10%"
    duration: 300

# Verificar que se detectaron partidos
- assertVisible:
    id: "partyInputPresidente0"
    optional: true
- assertVisible:
    id: "partyInputDiputado0"
    optional: true

# === FASE 8: EDITAR DATOS SI ES NECESARIO ===
- tapOn:
    id: "editButton"
    optional: true

# Editar algunos valores para verificar funcionalidad
- scrollUntilVisible:
    element:
      id: partyInputPresidente0
    direction: up
    optional: true

- doubleTapOn:
    id: partyInputPresidente0
    optional: true
- eraseText
- inputText: "7"

# === FASE 9: VALIDAR FORMULARIO ===
# Verificar campos de resumen
- scrollUntilVisible:
    element:
      id: voteSummary_validos_presidente
    direction: down
    optional: true

- doubleTapOn:
    id: voteSummary_validos_presidente
    optional: true
- eraseText
- inputText: "188"

# === FASE 10: GUARDAR CAMBIOS ===
- tapOn:
    id: "saveButton"
    optional: true

- extendedWaitUntil:
    visible: "Datos guardados"
    timeout: 5000
    optional: true

# === FASE 11: CONTINUAR CON PROCESO ===
- tapOn:
    id: "nextButton"
    optional: true

# === FASE 12: CONFIRMAR Y PUBLICAR ===
- tapOn: "Publico y Certifico"
- extendedWaitUntil:
    visible: "Certificado NFT"
    timeout: 35000
    optional: true

# Verificar certificado generado
- assertVisible:
    text: "Certificado NFT - Elecciones Bolivia 2025"
    optional: true

# === FASE 13: VERIFICAR PROCESO COMPLETO ===
- assertVisible:
    text: "Acta subida exitosamente"
    optional: true
- assertVisible:
    text: "Tu acta ha sido registrada"
    optional: true

# === FASE 14: OPCIONES POST-SUBIDA ===
- tapOn:
    text: "Ver mi certificado"
    optional: true

- tapOn:
    text: "Subir otra acta"
    optional: true

- tapOn:
    text: "Regresar al inicio"
    optional: true
